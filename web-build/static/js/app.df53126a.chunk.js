(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{1166:function(e,t){},1168:function(e,t){},1175:function(e,t){},1176:function(e,t){},1244:function(e,t,n){var a={"./af":545,"./af.js":545,"./ar":546,"./ar-dz":547,"./ar-dz.js":547,"./ar-kw":548,"./ar-kw.js":548,"./ar-ly":549,"./ar-ly.js":549,"./ar-ma":550,"./ar-ma.js":550,"./ar-sa":551,"./ar-sa.js":551,"./ar-tn":552,"./ar-tn.js":552,"./ar.js":546,"./az":553,"./az.js":553,"./be":554,"./be.js":554,"./bg":555,"./bg.js":555,"./bm":556,"./bm.js":556,"./bn":557,"./bn-bd":558,"./bn-bd.js":558,"./bn.js":557,"./bo":559,"./bo.js":559,"./br":560,"./br.js":560,"./bs":561,"./bs.js":561,"./ca":562,"./ca.js":562,"./cs":563,"./cs.js":563,"./cv":564,"./cv.js":564,"./cy":565,"./cy.js":565,"./da":566,"./da.js":566,"./de":567,"./de-at":568,"./de-at.js":568,"./de-ch":569,"./de-ch.js":569,"./de.js":567,"./dv":570,"./dv.js":570,"./el":571,"./el.js":571,"./en-au":572,"./en-au.js":572,"./en-ca":573,"./en-ca.js":573,"./en-gb":574,"./en-gb.js":574,"./en-ie":575,"./en-ie.js":575,"./en-il":576,"./en-il.js":576,"./en-in":577,"./en-in.js":577,"./en-nz":578,"./en-nz.js":578,"./en-sg":579,"./en-sg.js":579,"./eo":580,"./eo.js":580,"./es":581,"./es-do":582,"./es-do.js":582,"./es-mx":583,"./es-mx.js":583,"./es-us":584,"./es-us.js":584,"./es.js":581,"./et":585,"./et.js":585,"./eu":586,"./eu.js":586,"./fa":587,"./fa.js":587,"./fi":588,"./fi.js":588,"./fil":589,"./fil.js":589,"./fo":590,"./fo.js":590,"./fr":591,"./fr-ca":592,"./fr-ca.js":592,"./fr-ch":593,"./fr-ch.js":593,"./fr.js":591,"./fy":594,"./fy.js":594,"./ga":595,"./ga.js":595,"./gd":596,"./gd.js":596,"./gl":597,"./gl.js":597,"./gom-deva":598,"./gom-deva.js":598,"./gom-latn":599,"./gom-latn.js":599,"./gu":600,"./gu.js":600,"./he":601,"./he.js":601,"./hi":602,"./hi.js":602,"./hr":603,"./hr.js":603,"./hu":604,"./hu.js":604,"./hy-am":605,"./hy-am.js":605,"./id":606,"./id.js":606,"./is":607,"./is.js":607,"./it":608,"./it-ch":609,"./it-ch.js":609,"./it.js":608,"./ja":610,"./ja.js":610,"./jv":611,"./jv.js":611,"./ka":612,"./ka.js":612,"./kk":613,"./kk.js":613,"./km":614,"./km.js":614,"./kn":615,"./kn.js":615,"./ko":616,"./ko.js":616,"./ku":617,"./ku.js":617,"./ky":618,"./ky.js":618,"./lb":619,"./lb.js":619,"./lo":620,"./lo.js":620,"./lt":621,"./lt.js":621,"./lv":622,"./lv.js":622,"./me":623,"./me.js":623,"./mi":624,"./mi.js":624,"./mk":625,"./mk.js":625,"./ml":626,"./ml.js":626,"./mn":627,"./mn.js":627,"./mr":628,"./mr.js":628,"./ms":629,"./ms-my":630,"./ms-my.js":630,"./ms.js":629,"./mt":631,"./mt.js":631,"./my":632,"./my.js":632,"./nb":633,"./nb.js":633,"./ne":634,"./ne.js":634,"./nl":635,"./nl-be":636,"./nl-be.js":636,"./nl.js":635,"./nn":637,"./nn.js":637,"./oc-lnc":638,"./oc-lnc.js":638,"./pa-in":639,"./pa-in.js":639,"./pl":640,"./pl.js":640,"./pt":641,"./pt-br":642,"./pt-br.js":642,"./pt.js":641,"./ro":643,"./ro.js":643,"./ru":644,"./ru.js":644,"./sd":645,"./sd.js":645,"./se":646,"./se.js":646,"./si":647,"./si.js":647,"./sk":648,"./sk.js":648,"./sl":649,"./sl.js":649,"./sq":650,"./sq.js":650,"./sr":651,"./sr-cyrl":652,"./sr-cyrl.js":652,"./sr.js":651,"./ss":653,"./ss.js":653,"./sv":654,"./sv.js":654,"./sw":655,"./sw.js":655,"./ta":656,"./ta.js":656,"./te":657,"./te.js":657,"./tet":658,"./tet.js":658,"./tg":659,"./tg.js":659,"./th":660,"./th.js":660,"./tk":661,"./tk.js":661,"./tl-ph":662,"./tl-ph.js":662,"./tlh":663,"./tlh.js":663,"./tr":664,"./tr.js":664,"./tzl":665,"./tzl.js":665,"./tzm":666,"./tzm-latn":667,"./tzm-latn.js":667,"./tzm.js":666,"./ug-cn":668,"./ug-cn.js":668,"./uk":669,"./uk.js":669,"./ur":670,"./ur.js":670,"./uz":671,"./uz-latn":672,"./uz-latn.js":672,"./uz.js":671,"./vi":673,"./vi.js":673,"./x-pseudo":674,"./x-pseudo.js":674,"./yo":675,"./yo.js":675,"./zh-cn":676,"./zh-cn.js":676,"./zh-hk":677,"./zh-hk.js":677,"./zh-mo":678,"./zh-mo.js":678,"./zh-tw":679,"./zh-tw.js":679};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1244},1339:function(e,t,n){e.exports=n.p+"static/media/742.d50f7ce3.gif"},1340:function(e,t,n){e.exports=n.p+"static/media/celo.0b0d4139.png"},1341:function(e,t,n){e.exports=n.p+"static/media/error.029045d0.png"},1342:function(e,t,n){e.exports=n.p+"static/media/pending.04d7d3e8.png"},363:function(e,t,n){e.exports=n.p+"static/media/cusd.1072aca5.png"},42:function(e){e.exports=JSON.parse('{"CELO":{"DESTINATION_ADDRESS":"0x3ca7cdcfb98b066d6e8febe45a95c2fe911bf138","CONTRACT_DEPOSIT_ADDRESS":"765DE816845861e75A25fCA122bb6898B8B1282a","CONTRACT_ADDRESS":"b63348987aE3ef618ab76D8748A0cD80627cA58B","TRANSACTION_API":"https://explorer.celo.org/api?module=transaction&action=gettxinfo&txhash=","TRANSACTION_EXPLORER_LINK":"https://explorer.celo.org/tx/"},"SERVER":{"URL":"https://pagos.saldo.mx/api/honoro","CLIENT":"https://app.honoro.org"},"COMPANY_LIST":[{"value":12,"label":"Agua CDMX"},{"value":7,"label":"Cablemas"},{"value":1,"label":"CFE"},{"value":13,"label":"Dish"},{"value":11,"label":"EcoGas"},{"value":8,"label":"Gas Natural"},{"value":2,"label":"Infonavit"},{"value":34,"label":"Izzi"},{"value":95,"label":"MaxiGas"},{"value":6,"label":"Megacable"},{"value":66,"label":"Plan Telcel"},{"value":5,"label":"SKY"},{"value":111,"label":"Telmex"},{"value":88,"label":"Total Play"}],"FLASH_TIME":"10000"}')},715:function(e,t,n){e.exports=n.p+"static/media/completed.9c4565bc.png"},781:function(e){e.exports=JSON.parse('[{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"balancesOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"borrower","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"internalType":"address payable","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"repaysOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"totalLoansOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"totalWithdraws","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"deposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"contract IERC20","name":"token","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"borrow","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":true,"stateMutability":"payable","type":"function"}]')},783:function(e,t,n){"use strict";var a=n(0),r=n.n(a),o=n(5),s=n.n(o),i=n(6),c=n.n(i),l=n(8),u=n.n(l),f=n(9),p=n.n(f),m=n(2),d=n.n(m),h=n(14),y=n(4),g=n(1),b=n(24),E=n(104);function v(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var S=function(e){u()(n,e);var t=v(n);function n(){return s()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){return r.a.createElement(y.a,{style:j.container},r.a.createElement(b.a,null,r.a.createElement(h.a,{style:j.text,onPress:function(){return E.a.openURL("/")}},"Honoro")))}}]),n}(a.Component),j=g.a.create({container:{height:60,backgroundColor:"#673ab7",alignItems:"center",justifyContent:"center"},text:{color:"white",fontSize:24,fontWeight:"500"}}),T=n(782),x=n(65),k=n(11),C=n.n(k),w=n(22),O=n.n(w),R=n(37),I=n(105),A=n(88),P=n(80),D=n(155),N=n(156),L=n.n(N),z=n(85),B=n(42),F=function(){function e(){s()(this,e)}return c()(e,[{key:"getTransactionDetails",value:function(e){return new Promise((function(t,n){fetch(""+B.CELO.TRANSACTION_API+e.hash,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"getAccountDetails",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/balances?address="+e.address,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"getInvoiceList",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/invoices?u="+e.address+"&s=honoro",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"saveTransactionDraft",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/transaction/details",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"getInvoice",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/invoice?invoiceId="+e.invoiceId,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"saveOffer",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/offer",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"getOffers",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/offers?u="+e.address,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){t(e)})).catch((function(e){n(e)}))}))}},{key:"saveUserInfo",value:function(e){return new Promise((function(t,n){fetch(B.SERVER.URL+"/trader",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){console.log(e),e.ok?e.json().then((function(e){return t(e)})):e.json().then((function(e){n(e)}))})).catch((function(e){n(e)}))}))}}]),e}();function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var H=new L.a("https://forno.celo.org"),U=(Object(D.newKitFromWeb3)(H),function(e){u()(n,e);var t=W(n);function n(){var e;s()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={status:null,address:null,phoneNumber:null,isUserExist:null,user:{},spinner:!1,nickname:"",firstName:"",lastName:"",nicknameExist:!0},e.apiService=new F,e.login=function(){var t,n;return O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({spinner:!0}),console.log("entering login"),"login","Honoro",Object(I.requestAccountAddress)({requestId:"login",dappName:"Honoro",callback:window.location.href}),a.prev=5,a.next=8,O.a.awrap(Object(I.waitForAccountAuth)("login"));case 8:t=a.sent,n={address:t.address},e.apiService.getAccountDetails(n).then((function(n){var a={status:"Login succeeded",address:t.address,phoneNumber:t.phoneNumber},r=!0;n.trader?a.nickname=n.trader.nickname:r=!1,localStorage.setItem("usr",JSON.stringify(a)),e.setState({status:"Login succeeded",isUserExist:!0,user:_(_({},a),n),spinner:!1,loggedIn:!0,nicknameExist:r})})).catch((function(t){console.log(t),e.setState({spinner:!1}),Object(P.b)({message:"Error",description:t.error||t.message||t,type:"danger",duration:B.FLASH_TIME})})),a.next=18;break;case 13:a.prev=13,a.t0=a.catch(5),console.log(a.t0),e.setState({status:a.t0.message||"Login timed out, try again.",spinner:!1}),Object(P.b)({message:"Error",description:a.t0.error,type:"danger",duration:B.FLASH_TIME});case 18:case"end":return a.stop()}}),null,null,[[5,13]],Promise)},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({spinner:!0});var t=JSON.parse(localStorage.getItem("usr"));if(null===t)this.setState({isUserExist:!1}),this.setState({spinner:!1});else{var n={address:t.address};this.apiService.getAccountDetails(n).then((function(n){var a=!0;n.trader?(t.nickname=n.trader.nickname,localStorage.setItem("usr",JSON.stringify(t))):a=!1,e.setState({isUserExist:!0,user:_(_({},t),n),spinner:!1,nicknameExist:a})})).catch((function(t){console.log(t),e.setState({spinner:!1}),Object(P.b)({message:"Error",description:t.error||t.message||t,type:"danger",duration:B.FLASH_TIME})}))}}},{key:"handleInput",value:function(e){this.setState(e)}},{key:"save",value:function(){var e=this;this.setState({spinner:!0});var t={nickname:this.state.nickname,firstName:this.state.firstName,lastName:this.state.lastName,phoneNumber:this.state.user.phoneNumber,address:this.state.user.address};this.apiService.saveUserInfo(t).then((function(t){var n={phoneNumber:e.state.user.phoneNumber,trader:{nickname:e.state.nickname,first_name:e.state.firstName,last_name:e.state.lastName}};e.setState({nicknameExist:!0,spinner:!1,user:n}),Object(P.b)({message:"Success",description:"User info saved successfully",type:"success",duration:B.FLASH_TIME})})).catch((function(t){console.log(t),e.setState({spinner:!1}),Object(P.b)({message:"Error",description:t.error||t.message||t,type:"danger",duration:B.FLASH_TIME})}))}},{key:"render",value:function(){var e=this,t=this.state.nickname.length>0;return r.a.createElement(y.a,{style:J.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(z.a,{containerStyle:J.card},0===Object.keys(this.state.user).length?r.a.createElement(b.a,{style:J.submitButton,onPress:function(){return e.login()}},r.a.createElement(h.a,{style:J.submitButtonText}," Connect to Valora ")):this.state.nicknameExist&&this.state.user&&r.a.createElement(y.a,null,r.a.createElement(y.a,{style:J.mainV},r.a.createElement(y.a,{style:J.cView},r.a.createElement(y.a,{style:J.cUSDView}),r.a.createElement(h.a,{style:J.cUSD},this.state.user.cUSDBalance," cUSD")),r.a.createElement(y.a,{style:J.hView},r.a.createElement(y.a,{style:J.HNRView}),r.a.createElement(h.a,{style:J.HNR},this.state.user.HNRBalance," HNR")))),this.state.nicknameExist&&this.state.user.trader?r.a.createElement(y.a,{style:J.desc},r.a.createElement(h.a,{style:J.text},"Nickname: ",this.state.user.trader.nickname),r.a.createElement(h.a,{style:J.text},"First Name: ",this.state.user.trader.first_name),r.a.createElement(h.a,{style:J.text},"Last Name: ",this.state.user.trader.last_name),r.a.createElement(h.a,{style:J.text},"Phone number: ",this.state.user.phoneNumber)):null,this.state.nicknameExist&&Object.keys(this.state.user).length>0&&r.a.createElement(y.a,{style:J.pay},r.a.createElement(b.a,null,r.a.createElement(h.a,{onPress:function(){return e.props.history.push("/transaction")}},"History")),r.a.createElement(b.a,null,r.a.createElement(h.a,{onPress:function(){return e.props.history.push("/offers")}},"get cUSD")),r.a.createElement(b.a,null,r.a.createElement(h.a,{onPress:function(){return e.props.history.push("/pay")}},"Use"))),!this.state.nicknameExist&&r.a.createElement(y.a,{style:{alignItems:"center"}},r.a.createElement(h.a,{style:{color:"#000000bf"}},"Please update following details"),r.a.createElement(R.a,{style:J.input,placeholder:"nickname",autoFocus:!0,onChangeText:function(t){return e.handleInput({nickname:t})}}),r.a.createElement(R.a,{style:J.input,placeholder:"First name",onChangeText:function(t){return e.handleInput({firstName:t})}}),r.a.createElement(R.a,{style:J.input,placeholder:"Last name",onChangeText:function(t){return e.handleInput({lastName:t})}}),r.a.createElement(b.a,{disabled:!t,style:J.submitButton,onPress:function(){return e.save()}},r.a.createElement(h.a,{style:J.submitButtonText}," Submit "))),r.a.createElement(r.a.Fragment,null)))}}]),n}(r.a.Component)),J=g.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},card:{backgroundColor:"#ffffff",padding:0,paddingTop:25,width:300,borderRadius:3},submitButton:{backgroundColor:"#673ab7",padding:10,margin:15,height:40,alignItems:"center",textAlign:"center",borderRadius:5},submitButtonText:{color:"white",fontSize:18,fontWeight:"500"},text:{padding:10},desc:{padding:20},pay:{flexDirection:"row-reverse",justifyContent:"space-between",flex:1,top:45,padding:20,backgroundColor:"#cccbc8",fontSize:14,fontWeight:700},cUSDView:{width:20,height:20,backgroundColor:"#07a832",marginLeft:30,borderRadius:18},cView:{flexDirection:"row"},hView:{flexDirection:"row"},cUSD:{marginLeft:5,fontSize:14,fontWeight:700},HNRView:{width:20,height:20,backgroundColor:"#c9c012",marginLeft:20,borderRadius:18},HNR:{marginLeft:5,fontSize:14,fontWeight:700},mainV:{flexDirection:"row"},input:{margin:15,height:40,width:200,borderWidth:1,padding:10,color:"#000000bf"}}),V=n(784),q=n(32),G=n(16),K=n(779);function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var $=new L.a("https://forno.celo.org"),X=Object(D.newKitFromWeb3)($),Q=function(e){u()(a,e);var t=Y(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={amount:"",reference:"",company:G.any,address:B.CELO.DESTINATION_ADDRESS,mainPage:!0,spinner:!1,result:G.any,isSuccess:!1,overlay:!1,error:!1,requestInProgress:!1,errorMessage:"",transactionHash:""},e.apiService=new F,e.handleReference=function(t){e.setState({reference:t})},e.handleAmount=function(t){e.setState({amount:t})},e.transfer=function(){var t,n,a,r,o,s,i,c,l,u,f;return O.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(!e.state.address){p.next=38;break}return e.setState({overlay:!0,requestInProgress:!0}),console.log("Entering transfer"),t="transfer",n="Honoro",a=B.SERVER.CLIENT+"/transaction/detail",r=B.CELO.DESTINATION_ADDRESS,o=String(1e18*Number(e.state.result.updatedAmount)),p.next=10,O.a.awrap(X.contracts.getStableToken());case 10:return s=p.sent,i=s.transfer(r,o).txo,Object(I.requestTxSig)(X,[{tx:i,to:s.address,from:String(localStorage.getItem("address")),feeCurrency:I.FeeCurrency.cUSD}],{requestId:t,dappName:n,callback:a}),p.prev=13,p.next=16,O.a.awrap(Object(I.waitForSignedTxs)(t));case 16:l=p.sent,c=l.rawTxs[0],p.next=25;break;case 20:return p.prev=20,p.t0=p.catch(13),console.log(p.t0),e.setState({error:!0,requestInProgress:!1,errorMessage:p.t0.message}),p.abrupt("return");case 25:return p.prev=25,p.next=28,O.a.awrap(X.connection.sendSignedTransaction(c));case 28:return u=p.sent,p.next=31,O.a.awrap(u.waitReceipt());case 31:(f=p.sent).status?e.setState({requestInProgress:!1,isSuccess:!0,error:!1,transactionHash:f.transactionHash}):(console.log(JSON.stringify(f)),status="failed to send transaction",e.setState({error:!0,requestInProgress:!1,errorMessage:JSON.stringify(f)})),p.next=38;break;case 35:p.prev=35,p.t1=p.catch(25),e.setState({error:!0,requestInProgress:!1,errorMessage:p.t1.message});case 38:case"end":return p.stop()}}),null,null,[[13,20],[25,35]],Promise)},e}return c()(a,[{key:"save",value:function(){var e=this;this.setState({spinner:!0});var t=JSON.parse(localStorage.getItem("usr")),n={company:{amount:this.state.amount,company:this.state.company.value,reference:this.state.reference,source:"honoro"}};null!==t&&(n.company.userAddress=t.address),this.apiService.saveTransactionDraft(n).then((function(t){console.log(t),localStorage.setItem("inv",String(t.invoiceId)),e.setState({mainPage:!1,result:t,spinner:!1})})).catch((function(t){console.log(t),e.setState({spinner:!1})}))}},{key:"gotToLogin",value:function(){V.a.pop()}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{style:Z.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(z.a,{containerStyle:Z.card},this.state.mainPage&&r.a.createElement(y.a,null,r.a.createElement(K.a,{items:B.COMPANY_LIST,placeholder:"Select Company",style:Z.dropdown,onChangeItem:function(t){return e.setState({company:t})}}),r.a.createElement(R.a,{style:Z.input,underlineColorAndroid:"transparent",autoCapitalize:"none",placeholder:"Reference",onChangeText:this.handleReference}),r.a.createElement(R.a,{style:Z.input,underlineColorAndroid:"transparent",placeholder:"Amount",autoCapitalize:"none",onChangeText:this.handleAmount}),r.a.createElement(b.a,{style:Z.submitButton,onPress:function(){return e.save()}},r.a.createElement(h.a,{style:Z.submitButtonText}," Submit "))),!this.state.mainPage&&r.a.createElement(y.a,{style:Z.desc},r.a.createElement(h.a,{style:Z.pid},"Payment Id: ",this.state.result.invoiceId),r.a.createElement(h.a,{style:Z.status},"Pending"),r.a.createElement(h.a,{style:Z.title},"Company"),r.a.createElement(h.a,{style:Z.value},this.state.company.label),r.a.createElement(h.a,{style:Z.title},"Reference"),r.a.createElement(h.a,{style:Z.value},this.state.reference),r.a.createElement(h.a,{style:Z.title},"Amount in Pesos"),r.a.createElement(h.a,{style:Z.value},Number(this.state.amount).toFixed(2)),r.a.createElement(h.a,{style:Z.title},"Total in cUSD"),r.a.createElement(h.a,{style:Z.value},this.state.result.updatedAmount),r.a.createElement(b.a,{style:Z.submitButton,onPress:function(){return e.transfer()}},r.a.createElement(h.a,{style:Z.submitButtonText}," Confirm Payment "))),r.a.createElement(y.a,{style:Z.back},r.a.createElement(b.a,{onPress:this.gotToLogin},r.a.createElement(h.a,{onPress:function(){return e.props.history.push("/")}}," Back "))),this.state.overlay&&r.a.createElement(y.a,{style:Z.overlay},this.state.requestInProgress&&r.a.createElement(y.a,null,r.a.createElement(q.a,{source:{uri:n(1339)},style:Z.loader}),r.a.createElement(h.a,{style:Z.loadText},"Waiting for confirmation...")),this.state.isSuccess&&r.a.createElement(y.a,null,r.a.createElement(q.a,{source:{uri:n(715)},style:Z.loader}),r.a.createElement(b.a,null,r.a.createElement(h.a,{style:Z.statusLink,onPress:function(){return e.props.history.push("/transaction/detail")}},"Check Status"),r.a.createElement(h.a,{style:Z.loadText},"Transaction submitted...")),r.a.createElement(b.a,null,r.a.createElement(q.a,{source:{uri:n(1340)},style:Z.celoIcon}),r.a.createElement(h.a,{style:Z.statusLink,onPress:function(){return window.open(""+B.CELO.TRANSACTION_EXPLORER_LINK+e.state.transactionHash+"/internal_transactions","_blank")}},"See Transaction"))),this.state.error&&r.a.createElement(y.a,null,r.a.createElement(q.a,{source:{uri:n(1341)},style:Z.loader}),r.a.createElement(h.a,{style:Z.errorMessage},this.state.errorMessage),r.a.createElement(b.a,null,r.a.createElement(h.a,{style:Z.statusLink,onPress:function(){return e.props.history.push("/transaction/detail")}},"Check Status"))))))}}]),a}(r.a.Component),Z=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",justifyContent:"center"},input:{margin:15,height:40,width:200,borderColor:"rgb(223, 223, 223)",borderWidth:1,padding:10},submitButton:{backgroundColor:"#673ab7",padding:10,margin:15,height:40,alignItems:"center",textAlign:"center",borderRadius:5},submitButtonText:{color:"white",fontSize:18,fontWeight:"500"},label:{textAlign:"left",alignItems:"flex-start",justifyContent:"flex-start"},card:{backgroundColor:"#ffffff",width:320,alignItems:"center",borderRadius:3},dropdown:{width:200,marginLeft:15,marginTop:10,marginBottom:10},back:{alignItems:"flex-end"},desc:{paddingTop:10,color:"#1c1b19"},pid:{fontSize:14,fontWeight:"600"},status:{color:"#673ab7",fontStyle:"italic",fontSize:14,marginTop:10},title:{color:"#6f6e6b",fontStyle:"italic",fontSize:12,marginBottom:2,marginTop:10},value:{fontSize:16,fontWeight:"400"},spinnerTextStyle:{color:"#FFF"},overlay:{position:"absolute",top:40,right:0,bottom:0,left:0,backgroundColor:"#dad8d8",opacity:1,borderRadius:5},loader:{width:64,height:64,alignSelf:"center",marginTop:10},loadText:{alignSelf:"center",marginTop:10,color:"#673ab7",fontWeight:"700",fontSize:14},statusLink:{alignSelf:"center",marginTop:15,fontWeight:"700",fontSize:12,color:"#673ab7"},errorMessage:{alignSelf:"center",marginTop:15,fontWeight:"700",fontSize:12,color:"red",textAlign:"center"},celoIcon:{width:40,height:40,alignSelf:"center",marginTop:10}});function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var te=function(e){u()(n,e);var t=ee(n);function n(){return s()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){return r.a.createElement(y.a,{style:ne.container},localStorage.getItem("usr"),r.a.createElement(b.a,{onPress:function(){return localStorage.clear()}},r.a.createElement(h.a,null," Reset ")))}}]),n}(r.a.Component),ne=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",justifyContent:"center"}}),ae=n(269);function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var oe=function(e){u()(a,e);var t=re(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={invoice:G.any,spinner:!1},e.apiService=new F,e}return c()(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({spinner:!0}),setTimeout((function(){var t=localStorage.getItem("inv");if(null===t)ae.a.alert("Error","Invoice id is missing",[{text:"OK",onPress:function(){return console.log("OK Pressed")}}]);else{var n={invoiceId:t};e.apiService.getInvoice(n).then((function(t){var n=B.COMPANY_LIST.find((function(e){return e.value===t.company_id}));t.company=n.label,e.setState({invoice:t,spinner:!1})})).catch((function(t){console.log(t),e.setState({spinner:!1})}))}}),100)}},{key:"render",value:function(){return r.a.createElement(y.a,{style:se.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(z.a,{containerStyle:se.card},r.a.createElement(y.a,{style:se.desc},r.a.createElement(q.a,{source:{uri:"completed"===this.state.invoice.status?n(715):n(1342)},style:se.icon}),r.a.createElement(h.a,{style:se.pid},"Payment Id: ",this.state.invoice.invoice_id),r.a.createElement(h.a,{style:se.status},"initiated"===this.state.invoice.status?"Pending":this.state.invoice.status),r.a.createElement(h.a,{style:se.title},"Company"),r.a.createElement(h.a,{style:se.value},this.state.invoice.company),r.a.createElement(h.a,{style:se.title},"Reference"),r.a.createElement(h.a,{style:se.value},this.state.invoice.reference),r.a.createElement(h.a,{style:se.title},"Amount in Pesos"),r.a.createElement(h.a,{style:se.value},Number(this.state.invoice.amount).toFixed(2)),r.a.createElement(h.a,{style:se.title},"Total in cUSD"),r.a.createElement(h.a,{style:se.value},this.state.invoice.celo_amount))))}}]),a}(r.a.Component),se=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",justifyContent:"center"},card:{backgroundColor:"#ffffff",width:320,alignItems:"center",borderRadius:3},desc:{paddingTop:10,color:"#1c1b19"},pid:{fontSize:14,fontWeight:"600"},status:{color:"#673ab7",fontStyle:"italic",fontSize:14,marginTop:10},title:{color:"#6f6e6b",fontStyle:"italic",fontSize:12,marginBottom:2,marginTop:10},value:{fontSize:16,fontWeight:"400"},spinnerTextStyle:{color:"#FFF"},icon:{width:40,height:40,alignSelf:"center",marginBottom:10}}),ie=n(1371);function ce(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var le=function(e){u()(n,e);var t=ce(n);function n(){var e;s()(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={spinner:!1,invoices:[]},e.apiService=new F,e}return c()(n,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("usr"));if(null===t)this.setState({spinner:!1});else{this.setState({spinner:!0});var n={address:t.address};this.apiService.getInvoiceList(n).then((function(t){t=t.map((function(e){var t=B.COMPANY_LIST.find((function(t){return t.value===e.company_id}));return t&&(e.companyName=t.label),e})),e.setState({invoices:t,spinner:!1})})).catch((function(t){console.log(t),e.setState({spinner:!1})}))}}},{key:"renderTableData",value:function(){return this.state.invoices.map((function(e,t){return r.a.createElement(ie.a.Row,{key:e.id},r.a.createElement(ie.a.Cell,{style:{justifyContent:"center"}},e.companyName),r.a.createElement(ie.a.Cell,{style:{justifyContent:"center"}},e.reference),r.a.createElement(ie.a.Cell,{style:{justifyContent:"center"}},e.celo_amount))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{style:ue.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(z.a,{containerStyle:ue.card},r.a.createElement(ie.a,{style:{width:400,height:200,overflow:"scroll"}},r.a.createElement(ie.a.Header,null,r.a.createElement(ie.a.Title,{style:{justifyContent:"center"}},"Company"),r.a.createElement(ie.a.Title,{style:{justifyContent:"center"}},"Reference"),r.a.createElement(ie.a.Title,{style:{justifyContent:"center"}},"cUSD")),this.renderTableData()),r.a.createElement(b.a,{style:{alignItems:"flex-end",padding:3},onPress:function(){return e.props.history.push("/")}},r.a.createElement(h.a,null," Back "))))}}]),n}(r.a.Component),ue=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",justifyContent:"center"},card:{backgroundColor:"#ffffff",width:400,alignItems:"center",borderRadius:5},spinnerTextStyle:{color:"#FFF"}}),fe=function(){function e(){s()(this,e),this.offer={}}return c()(e,[{key:"setOffer",value:function(e){localStorage.setItem("offer",JSON.stringify(e)),console.log(e)}},{key:"getOffer",value:function(){return JSON.parse(localStorage.getItem("offer"))}}]),e}();function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var me=function(e){u()(a,e);var t=pe(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={spinner:!1,offers:[],nickname:""},e.apiService=new F,e.cacheService=new fe,e}return c()(a,[{key:"componentDidMount",value:function(){var e=this,t=JSON.parse(localStorage.getItem("usr"));if(null===t)this.setState({spinner:!1});else{this.setState({spinner:!0});var n={address:t.nickname};this.apiService.getOffers(n).then((function(n){e.setState({spinner:!1,offers:n.offers,nickname:t.nickname})})).catch((function(t){console.log(t),e.setState({spinner:!1})}))}}},{key:"setOffer",value:function(e){this.cacheService.setOffer(e)}},{key:"renderRows",value:function(){var e=this;return this.state.offers.map((function(t,n){return r.a.createElement(b.a,{key:n,activeOpacity:1,onPress:function(){if(t.nickname===e.state.nickname)return Object(P.b)({message:"Error",description:"You can not take your own offer",type:"danger",duration:B.FLASH_TIME}),!1;e.setOffer(t),e.props.history.push("/offer/take")}},r.a.createElement(z.a,{key:n,containerStyle:t.nickname!==e.state.nickname?de.card:de.cardOp},r.a.createElement(y.a,{style:de.cardItem},r.a.createElement(y.a,null,r.a.createElement(h.a,{style:de.offerTitle},t.nickname)),r.a.createElement(y.a,null,r.a.createElement(h.a,{style:de.offerTitle},t.payment_method))),r.a.createElement(y.a,{style:de.cardItem},r.a.createElement(h.a,{style:de.offerDesc},"Max Purchase"),r.a.createElement(h.a,{style:de.offerDesc},"$",t.amount)),r.a.createElement(y.a,{style:de.cardItem},r.a.createElement(h.a,{style:de.offerDesc},"Fees"),r.a.createElement(h.a,{style:de.offerDesc},"1% + $",t.fee))))}))}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{style:de.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(y.a,null,r.a.createElement(q.a,{source:{uri:n(363)},style:de.logo}),r.a.createElement(h.a,{style:de.logoText},"cUSD")),r.a.createElement(y.a,{style:{width:280,alignItems:"flex-end"}},r.a.createElement(b.a,null,r.a.createElement(h.a,{style:de.offerLink,onPress:function(){return e.props.history.push("/offer/create")}},"Create Offer"))),r.a.createElement(y.a,{style:{overflow:"scroll",height:350,marginTop:20}},this.state.offers.length>0&&r.a.createElement(y.a,null,this.renderRows()),r.a.createElement(b.a,null,r.a.createElement(h.a,{style:de.back,onPress:function(){return e.props.history.push("/")}},"Back"))))}}]),a}(r.a.Component),de=g.a.create({container:{marginTop:20,flex:1,alignItems:"center",marginBottom:23},spinnerTextStyle:{color:"#FFF"},card:{backgroundColor:"#ffffff",width:280,paddingBottom:8,paddingTop:8,overflow:"scroll",borderRadius:3,marginTop:7},cardOp:{backgroundColor:"#ffffff",width:280,paddingBottom:8,paddingTop:8,overflow:"scroll",borderRadius:3,marginTop:7,opacity:.6},logo:{marginTop:20,width:40,height:40},logoText:{marginTop:5,fontSize:16,fontWeight:700,color:"#191954"},offerLink:{marginTop:20,position:"relative",fontWeight:500,color:"#191954"},cardItem:{fontSize:14,fontWeight:700,flexDirection:"row",justifyContent:"space-between",paddingBottom:10},offerTitle:{fontSize:14,fontWeight:"700",color:"#191954"},offerDesc:{fontSize:12,color:"#191954"},back:{position:"relative",textAlign:"right",width:280,marginTop:5}});function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var ye=function(e){u()(a,e);var t=he(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={spinner:!1,offer:{}},e.apiService=new F,e.cacheService=new fe,e.handleAmount=function(t){e.setState({amount:t})},e}return c()(a,[{key:"save",value:function(){}},{key:"componentDidMount",value:function(){if(null===JSON.parse(localStorage.getItem("usr")))return this.props.history.push("/");var e=this.cacheService.getOffer();if(0===Object.keys(e).length)return this.props.history.push("/offers");this.setState({offer:this.cacheService.getOffer()})}},{key:"render",value:function(){var e=this;return r.a.createElement(y.a,{style:ge.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(q.a,{source:{uri:n(363)},style:ge.logo}),r.a.createElement(h.a,{style:ge.logoText},"cUSD"),this.state.offer&&r.a.createElement(z.a,{containerStyle:ge.topCard},r.a.createElement(y.a,{style:ge.cardItem},r.a.createElement(y.a,null,r.a.createElement(h.a,{style:ge.offerTitle},this.state.offer.nickname)),r.a.createElement(y.a,null,r.a.createElement(h.a,{style:ge.offerTitle},this.state.offer.payment_method))),r.a.createElement(y.a,{style:ge.cardItem},r.a.createElement(h.a,{style:ge.offerDesc},"Max Purchase"),r.a.createElement(h.a,{style:ge.offerDesc},"$",this.state.offer.amount)),r.a.createElement(y.a,{style:ge.cardItem},r.a.createElement(h.a,{style:ge.offerDesc},"Fees"),r.a.createElement(h.a,{style:ge.offerDesc},"1% + $",this.state.offer.fee))),r.a.createElement(z.a,{containerStyle:ge.detailCard},r.a.createElement(y.a,{style:ge.detailCardItem},r.a.createElement(h.a,{style:ge.prefix},"$"),r.a.createElement(R.a,{style:ge.input,underlineColorAndroid:"transparent",autoCapitalize:"none",placeholder:"0.00",autoFocus:!0,maxLength:5,onChangeText:this.handleAmount})),r.a.createElement(b.a,{style:ge.submitButton,onPress:function(){return e.save()}},r.a.createElement(h.a,{style:ge.submitButtonText}," Take Offer ")),r.a.createElement(b.a,{style:{alignItems:"flex-end"},onPress:function(){return e.props.history.push("/offers")}},r.a.createElement(h.a,null," Back "))))}}]),a}(r.a.Component),ge=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",marginBottom:23},spinnerTextStyle:{color:"#FFF"},topCard:{backgroundColor:"#ffffff",width:280,top:100,paddingBottom:8,paddingTop:8,minHeight:70,borderRadius:3,borderBottomWidth:1,borderBottomColor:"gray"},detailCard:{backgroundColor:"#ffffff",width:280,minHeight:70,top:100,borderRadius:3,margin:0},logo:{width:40,height:40,position:"absolute",top:30},logoText:{position:"absolute",top:73,fontSize:16,fontWeight:700,color:"#191954"},offerLink:{top:95,position:"absolute",justifyContent:"space-between",left:50,width:100,fontWeight:500,color:"#191954"},cardItem:{fontSize:14,fontWeight:700,flexDirection:"row",justifyContent:"space-between",paddingBottom:10},detailCardItem:{fontSize:14,fontWeight:700,flexDirection:"row",justifyContent:"center",paddingBottom:10},offerTitle:{fontSize:14,fontWeight:"700",color:"#191954"},offerDesc:{fontSize:12,color:"#191954"},input:{height:40,width:200,paddingTop:10,paddingLeft:1,fontSize:25,fontWeight:700,alignItems:"center",outlineColor:"#fff",color:"#191954",outlineStyle:"none"},prefix:{paddingHorizontal:1,color:"#191954",fontSize:25,fontWeight:"700",marginTop:11},submitButton:{backgroundColor:"#3de3a3",padding:10,margin:15,height:40,alignItems:"center",textAlign:"center",borderRadius:23,justifyContent:"center"},submitButtonText:{color:"white",fontSize:18,fontWeight:"500"},postfix:{fontSize:12,color:"#191954"}}),be=n(73),Ee=n.n(be),ve=n(781);function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=d()(e);if(t){var r=d()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return p()(this,n)}}var je=new L.a("https://forno.celo.org"),Te=Object(D.newKitFromWeb3)(je),xe=function(e){u()(a,e);var t=Se(a);function a(){var e;s()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={spinner:!1,offers:[],amount:"",fee:"",pMethod:""},e.apiService=new F,e.handleAmount=function(t){e.setState({amount:t})},e.handleFee=function(t){e.setState({fee:t})},e.handlePaymentMethod=function(t){e.setState({pMethod:t})},e}return c()(a,[{key:"save",value:function(){var e,t,n,a,r,o,s,i,c,l,u,f,p,m,d,h,y,g,b=this;return O.a.async((function(E){for(;;)switch(E.prev=E.next){case 0:return this.setState({spinner:!0}),e=JSON.parse(localStorage.getItem("usr")),t={nickname:e.nickname,amount:this.state.amount,fee:this.state.fee,paymentMethod:this.state.pMethod},this.apiService.saveOffer(t).then((function(e){Object(P.b)({message:"Success",description:"Offer created successfully",type:"success",duration:B.FLASH_TIME}),b.props.history.push("/offers"),b.setState({spinner:!1})})).catch((function(e){Object(P.b)({message:"Error",description:e.error||e.message||e,type:"danger",duration:B.FLASH_TIME}),console.log(e),b.setState({spinner:!1})})),E.prev=4,n="transfer",a="Honoro",r=new je.eth.Contract(ve,B.CELO.CONTRACT_ADDRESS),o=Ee()(10).pow(18).multipliedBy(this.state.amount).toFixed(0),s="cusd",E.next=12,O.a.awrap(Te.contracts.getStableToken());case 12:return i=E.sent,E.next=15,O.a.awrap(r.methods.deposit(B.CELO.CONTRACT_DEPOSIT_ADDRESS,o));case 15:if(c=E.sent,l={tx:c,from:e.address,to:B.CELO.CONTRACT_DEPOSIT_ADDRESS,value:Ee()(o).plus("1000000000").toFixed(0),estimatedGas:2e6,feeCurrency:s?I.FeeCurrency.cUSD:void 0},u=[],!s){E.next=26;break}return E.next=21,O.a.awrap(i.approve(B.CELO.CONTRACT_DEPOSIT_ADDRESS,o).txo);case 21:f=E.sent,p={tx:f,from:e.address,to:B.CELO.CONTRACT_DEPOSIT_ADDRESS,estimatedGas:1e6,feeCurrency:s?I.FeeCurrency.cUSD:void 0},u=[p,l],E.next=27;break;case 26:u=[l];case 27:return m=B.SERVER.CLIENT+"/offer/create",Object(I.requestTxSig)(Te,u,{requestId:n,dappName:a,callback:m}),E.prev=29,E.next=32,O.a.awrap(Object(I.waitForSignedTxs)(n));case 32:h=E.sent,d=h.rawTxs[0],E.next=42;break;case 36:return E.prev=36,E.t0=E.catch(29),console.log(E.t0),Object(P.b)({message:"Error",description:E.t0.error||E.t0.message||E.t0,type:"danger",duration:B.FLASH_TIME}),this.setState({spinner:!1}),E.abrupt("return");case 42:return E.prev=42,E.next=45,O.a.awrap(Te.connection.sendSignedTransaction(d));case 45:return y=E.sent,E.next=48,O.a.awrap(y.waitReceipt());case 48:(g=E.sent).status?this.setState({requestInProgress:!1,isSuccess:!0,error:!1,transactionHash:g.transactionHash}):(console.log(JSON.stringify(g)),status="failed to send transaction",Object(P.b)({message:"Error",description:JSON.stringify(g),type:"danger",duration:B.FLASH_TIME}),this.setState({spinner:!1})),E.next=56;break;case 52:E.prev=52,E.t1=E.catch(42),Object(P.b)({message:"Error",description:E.t1.error||E.t1.message||E.t1,type:"danger",duration:B.FLASH_TIME}),this.setState({spinner:!1});case 56:E.next=63;break;case 58:E.prev=58,E.t2=E.catch(4),console.log(E.t2),Object(P.b)({message:"Error",description:E.t2.error||E.t2.message||E.t2,type:"danger",duration:B.FLASH_TIME}),this.setState({spinner:!1});case 63:case"end":return E.stop()}}),null,this,[[4,58],[29,36],[42,52]],Promise)}},{key:"componentDidMount",value:function(){if(null===JSON.parse(localStorage.getItem("usr")))return this.props.history.push("/")}},{key:"componentWillUnmount",value:function(){this.setState=function(e,t){}}},{key:"render",value:function(){var e=this,t=this.state,a=t.amount,o=t.fee,s=t.pMethod,i=a.length>0&&s.length>0&&o.length>0;return r.a.createElement(y.a,{style:ke.container},r.a.createElement(A.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),r.a.createElement(q.a,{source:{uri:n(363)},style:ke.logo}),r.a.createElement(h.a,{style:ke.logoText},"cUSD"),r.a.createElement(z.a,{containerStyle:ke.detailCard},r.a.createElement(y.a,{style:ke.detailCardItem},r.a.createElement(h.a,{style:ke.prefix},"$"),r.a.createElement(R.a,{keyboardType:"numeric",style:ke.input,placeholder:"0.00",autoFocus:!0,maxLength:5,onChangeText:this.handleAmount})),r.a.createElement(y.a,null,r.a.createElement(R.a,{keyboardType:"numeric",style:ke.inputFee,placeholder:"transaction fee",maxLength:5,onChangeText:this.handleFee})),r.a.createElement(y.a,null,r.a.createElement(R.a,{style:ke.inputFee,placeholder:"payment method",onChangeText:this.handlePaymentMethod,numeric:!0})),r.a.createElement(b.a,{disabled:!i,style:ke.submitButton,onPress:function(){return e.save()}},r.a.createElement(h.a,{style:ke.submitButtonText}," Create Offer ")),r.a.createElement(b.a,{style:{alignItems:"flex-end"},onPress:function(){return e.props.history.push("/offers")}},r.a.createElement(h.a,null," Back "))))}}]),a}(r.a.Component),ke=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",marginBottom:23},spinnerTextStyle:{color:"#FFF"},detailCard:{backgroundColor:"#ffffff",width:280,minHeight:200,top:100,borderRadius:3,margin:0},logo:{width:40,height:40,position:"absolute",top:30},logoText:{position:"absolute",top:73,fontSize:16,fontWeight:700,color:"#191954"},offerLink:{top:95,position:"absolute",justifyContent:"space-between",left:50,width:100,fontWeight:500,color:"#191954"},cardItem:{fontSize:14,fontWeight:700,flexDirection:"row",justifyContent:"space-between",paddingBottom:10},detailCardItem:{fontSize:14,fontWeight:700,flexDirection:"row",justifyContent:"center",paddingBottom:10},offerTitle:{fontSize:14,fontWeight:"700",color:"#191954"},offerDesc:{fontSize:12,color:"#191954"},input:{height:40,width:200,paddingLeft:1,fontSize:36,fontWeight:700,borderBottomWidth:2,alignItems:"center",outlineColor:"#fff",color:"#191954",outlineStyle:"none"},inputFee:{height:40,width:200,paddingTop:10,paddingLeft:1,fontSize:12,fontWeight:700,borderBottomWidth:2,paddingBottom:5,alignItems:"center",outlineColor:"#fff",color:"#191954",marginLeft:35,position:"relative",outlineStyle:"none"},prefix:{paddingHorizontal:1,color:"#191954",fontSize:36,fontWeight:"700"},submitButton:{backgroundColor:"#3de3a3",padding:10,margin:15,height:40,alignItems:"center",textAlign:"center",borderRadius:23,justifyContent:"center"},submitButtonText:{color:"white",fontSize:18,fontWeight:"500"},postfix:{fontSize:12,color:"#191954"}}),Ce=function(){return r.a.createElement(T.a,null,r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/",exact:!0,component:U}),r.a.createElement(x.b,{path:"/pay",exact:!0,component:Q}),r.a.createElement(x.b,{path:"/check",exact:!0,component:te}),r.a.createElement(x.b,{path:"/transaction/detail",exact:!0,component:oe}),r.a.createElement(x.b,{path:"/transaction",exact:!0,component:le}),r.a.createElement(x.b,{path:"/offers",exact:!0,component:me}),r.a.createElement(x.b,{path:"/offer/take",exact:!0,component:ye}),r.a.createElement(x.b,{path:"/offer/create",exact:!0,component:xe}),r.a.createElement(x.a,{to:"/"})))},we=g.a.create({MainContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#e8ebf4"}});t.a=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,null),r.a.createElement(y.a,{style:we.MainContainer},r.a.createElement(Ce,null)),r.a.createElement(P.a,{position:"top"})," ")}},790:function(e,t,n){e.exports=n(1347)},807:function(e,t){},809:function(e,t){},823:function(e,t){},824:function(e,t){},850:function(e,t){},852:function(e,t){},863:function(e,t){},896:function(e,t){},898:function(e,t){},926:function(e,t){},928:function(e,t){},929:function(e,t){},934:function(e,t){},936:function(e,t){},942:function(e,t){},944:function(e,t){},963:function(e,t){},975:function(e,t){},978:function(e,t){}},[[790,1,2]]]);
//# sourceMappingURL=app.df53126a.chunk.js.map
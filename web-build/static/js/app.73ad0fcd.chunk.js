(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{1148:function(e,t){},1150:function(e,t){},1157:function(e,t){},1158:function(e,t){},1225:function(e,t,n){var a={"./af":531,"./af.js":531,"./ar":532,"./ar-dz":533,"./ar-dz.js":533,"./ar-kw":534,"./ar-kw.js":534,"./ar-ly":535,"./ar-ly.js":535,"./ar-ma":536,"./ar-ma.js":536,"./ar-sa":537,"./ar-sa.js":537,"./ar-tn":538,"./ar-tn.js":538,"./ar.js":532,"./az":539,"./az.js":539,"./be":540,"./be.js":540,"./bg":541,"./bg.js":541,"./bm":542,"./bm.js":542,"./bn":543,"./bn-bd":544,"./bn-bd.js":544,"./bn.js":543,"./bo":545,"./bo.js":545,"./br":546,"./br.js":546,"./bs":547,"./bs.js":547,"./ca":548,"./ca.js":548,"./cs":549,"./cs.js":549,"./cv":550,"./cv.js":550,"./cy":551,"./cy.js":551,"./da":552,"./da.js":552,"./de":553,"./de-at":554,"./de-at.js":554,"./de-ch":555,"./de-ch.js":555,"./de.js":553,"./dv":556,"./dv.js":556,"./el":557,"./el.js":557,"./en-au":558,"./en-au.js":558,"./en-ca":559,"./en-ca.js":559,"./en-gb":560,"./en-gb.js":560,"./en-ie":561,"./en-ie.js":561,"./en-il":562,"./en-il.js":562,"./en-in":563,"./en-in.js":563,"./en-nz":564,"./en-nz.js":564,"./en-sg":565,"./en-sg.js":565,"./eo":566,"./eo.js":566,"./es":567,"./es-do":568,"./es-do.js":568,"./es-mx":569,"./es-mx.js":569,"./es-us":570,"./es-us.js":570,"./es.js":567,"./et":571,"./et.js":571,"./eu":572,"./eu.js":572,"./fa":573,"./fa.js":573,"./fi":574,"./fi.js":574,"./fil":575,"./fil.js":575,"./fo":576,"./fo.js":576,"./fr":577,"./fr-ca":578,"./fr-ca.js":578,"./fr-ch":579,"./fr-ch.js":579,"./fr.js":577,"./fy":580,"./fy.js":580,"./ga":581,"./ga.js":581,"./gd":582,"./gd.js":582,"./gl":583,"./gl.js":583,"./gom-deva":584,"./gom-deva.js":584,"./gom-latn":585,"./gom-latn.js":585,"./gu":586,"./gu.js":586,"./he":587,"./he.js":587,"./hi":588,"./hi.js":588,"./hr":589,"./hr.js":589,"./hu":590,"./hu.js":590,"./hy-am":591,"./hy-am.js":591,"./id":592,"./id.js":592,"./is":593,"./is.js":593,"./it":594,"./it-ch":595,"./it-ch.js":595,"./it.js":594,"./ja":596,"./ja.js":596,"./jv":597,"./jv.js":597,"./ka":598,"./ka.js":598,"./kk":599,"./kk.js":599,"./km":600,"./km.js":600,"./kn":601,"./kn.js":601,"./ko":602,"./ko.js":602,"./ku":603,"./ku.js":603,"./ky":604,"./ky.js":604,"./lb":605,"./lb.js":605,"./lo":606,"./lo.js":606,"./lt":607,"./lt.js":607,"./lv":608,"./lv.js":608,"./me":609,"./me.js":609,"./mi":610,"./mi.js":610,"./mk":611,"./mk.js":611,"./ml":612,"./ml.js":612,"./mn":613,"./mn.js":613,"./mr":614,"./mr.js":614,"./ms":615,"./ms-my":616,"./ms-my.js":616,"./ms.js":615,"./mt":617,"./mt.js":617,"./my":618,"./my.js":618,"./nb":619,"./nb.js":619,"./ne":620,"./ne.js":620,"./nl":621,"./nl-be":622,"./nl-be.js":622,"./nl.js":621,"./nn":623,"./nn.js":623,"./oc-lnc":624,"./oc-lnc.js":624,"./pa-in":625,"./pa-in.js":625,"./pl":626,"./pl.js":626,"./pt":627,"./pt-br":628,"./pt-br.js":628,"./pt.js":627,"./ro":629,"./ro.js":629,"./ru":630,"./ru.js":630,"./sd":631,"./sd.js":631,"./se":632,"./se.js":632,"./si":633,"./si.js":633,"./sk":634,"./sk.js":634,"./sl":635,"./sl.js":635,"./sq":636,"./sq.js":636,"./sr":637,"./sr-cyrl":638,"./sr-cyrl.js":638,"./sr.js":637,"./ss":639,"./ss.js":639,"./sv":640,"./sv.js":640,"./sw":641,"./sw.js":641,"./ta":642,"./ta.js":642,"./te":643,"./te.js":643,"./tet":644,"./tet.js":644,"./tg":645,"./tg.js":645,"./th":646,"./th.js":646,"./tk":647,"./tk.js":647,"./tl-ph":648,"./tl-ph.js":648,"./tlh":649,"./tlh.js":649,"./tr":650,"./tr.js":650,"./tzl":651,"./tzl.js":651,"./tzm":652,"./tzm-latn":653,"./tzm-latn.js":653,"./tzm.js":652,"./ug-cn":654,"./ug-cn.js":654,"./uk":655,"./uk.js":655,"./ur":656,"./ur.js":656,"./uz":657,"./uz-latn":658,"./uz-latn.js":658,"./uz.js":657,"./vi":659,"./vi.js":659,"./x-pseudo":660,"./x-pseudo.js":660,"./yo":661,"./yo.js":661,"./zh-cn":662,"./zh-cn.js":662,"./zh-hk":663,"./zh-hk.js":663,"./zh-mo":664,"./zh-mo.js":664,"./zh-tw":665,"./zh-tw.js":665};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=r,e.exports=s,s.id=1225},150:function(e){e.exports=JSON.parse('{"CELO":{"DESTINATION_ADDRESS":"0x3Ca7CdcFB98b066D6e8fEbe45a95C2FE911Bf138"},"SERVER":{"URL":"https://pagos.saldo.mx/api"},"COMPANY_LIST":[{"value":12,"label":"Agua CDMX"},{"value":7,"label":"Cablemas"},{"value":1,"label":"CFE"},{"value":13,"label":"Dish"},{"value":11,"label":"EcoGas"},{"value":8,"label":"Gas Natural"},{"value":2,"label":"Infonavit"},{"value":34,"label":"Izzi"},{"value":95,"label":"MaxiGas"},{"value":6,"label":"Megacable"},{"value":66,"label":"Plan Telcel"},{"value":5,"label":"SKY"},{"value":111,"label":"Telmex"},{"value":88,"label":"Total Play"}]}')},768:function(e,t,n){"use strict";var a=n(0),s=n.n(a),r=n(5),o=n.n(r),l=n(6),c=n.n(l),i=n(8),u=n.n(i),f=n(9),m=n.n(f),d=n(3),h=n.n(d),p=n(25),j=n(4),g=n(1);function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return m()(this,n)}}var b=function(e){u()(n,e);var t=y(n);function n(){return o()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){return s.a.createElement(j.a,{style:E.container},s.a.createElement(p.a,{style:E.text},"Honoro"))}}]),n}(a.Component),E=g.a.create({container:{height:60,backgroundColor:"#673ab7",alignItems:"center",justifyContent:"center"},text:{color:"white",fontSize:24,fontWeight:"500"}}),v=n(766),S=n(62),x=n(24),w=n.n(x),k=n(31),C=n(149),R=n(270),T=n(212),z=n(213),O=n.n(z),N=n(274),P=n(150);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return m()(this,n)}}var I=new O.a("https://forno.celo.org"),D=(Object(T.newKitFromWeb3)(I),function(e){u()(n,e);var t=A(n);function n(){var e;o()(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={status:null,address:null,phoneNumber:null,isUserExist:null,user:null,spinner:!1},e.login=function(){var t,n;return w.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("entering login"),"login","Honoro",Object(C.requestAccountAddress)({requestId:"login",dappName:"Honoro",callback:window.location.href}),a.prev=4,a.next=7,w.a.awrap(Object(C.waitForAccountAuth)("login"));case 7:t=a.sent,setTimeout((function(){e.setState({status:"Login succeeded",address:t.address,phoneNumber:t.phoneNumber,loggedIn:!0})}),100),n={status:"Login succeeded",address:t.address,phoneNumber:t.phoneNumber},localStorage.setItem("usr",JSON.stringify(n)),a.next=17;break;case 13:a.prev=13,a.t0=a.catch(4),console.log(a.t0),e.setState({status:"Login timed out, try again."});case 17:case"end":return a.stop()}}),null,null,[[4,13]],Promise)},e}return c()(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({spinner:!0}),setTimeout((function(){var t=JSON.parse(localStorage.getItem("usr"));null===t?(e.setState({isUserExist:!1}),e.setState({spinner:!1})):fetch(P.SERVER.URL+"/celo/balances?address="+t.address,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(n){e.setState({isUserExist:!0,user:t,result:n,spinner:!1})})).catch((function(t){console.log(t),e.setState({spinner:!1})}))}),100)}},{key:"render",value:function(){var e=this;return s.a.createElement(j.a,{style:B.container},s.a.createElement(R.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),s.a.createElement(N.a,{containerStyle:B.card},null===this.state.user?s.a.createElement(k.a,{style:B.submitButton,onPress:function(){return e.login()}},s.a.createElement(p.a,{style:B.submitButtonText}," Connect to Valora ")):this.state.result&&s.a.createElement(j.a,null,s.a.createElement(j.a,{style:B.mainV},s.a.createElement(j.a,{style:B.cView},s.a.createElement(j.a,{style:B.cUSDView}),s.a.createElement(p.a,{style:B.cUSD},this.state.result.cUSDBalance," cUSD")),s.a.createElement(j.a,{style:B.hView},s.a.createElement(j.a,{style:B.HNRView}),s.a.createElement(p.a,{style:B.HNR},this.state.result.HNRBalance," HNR")))),this.state.user?s.a.createElement(j.a,{style:B.desc},s.a.createElement(p.a,{style:B.text},"Status: ",this.state.user.status),s.a.createElement(p.a,{style:B.text},"Address: ",this.state.user.address),s.a.createElement(p.a,{style:B.text},"Phone number: ",this.state.user.phoneNumber)):null,this.state.user&&s.a.createElement(j.a,{style:B.pay},s.a.createElement(k.a,null,s.a.createElement(p.a,{onPress:function(){return e.props.history.push("/pay")}},"Borrow")),s.a.createElement(k.a,null,s.a.createElement(p.a,{onPress:function(){return e.props.history.push("/pay")}},"Repay")),s.a.createElement(k.a,null,s.a.createElement(p.a,{onPress:function(){return e.props.history.push("/pay")}},"Use"))),s.a.createElement(s.a.Fragment,null)))}}]),n}(s.a.Component)),B=g.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},card:{backgroundColor:"#ffffff",padding:0,paddingTop:25,width:300,borderRadius:3,minHeight:300},submitButton:{backgroundColor:"#673ab7",padding:10,margin:15,height:40,alignItems:"center",textAlign:"center",borderRadius:5},submitButtonText:{color:"white",fontSize:18,fontWeight:"500"},text:{padding:10},desc:{padding:20},pay:{flexDirection:"row-reverse",justifyContent:"space-between",flex:1,top:45,padding:20,backgroundColor:"#cccbc8",fontSize:14,fontWeight:700},cUSDView:{width:20,height:20,backgroundColor:"#07a832",marginLeft:30,borderRadius:18},cView:{flexDirection:"row"},hView:{flexDirection:"row"},cUSD:{marginLeft:5,fontSize:14,fontWeight:700},HNRView:{width:20,height:20,backgroundColor:"#c9c012",marginLeft:20,borderRadius:18},HNR:{marginLeft:5,fontSize:14,fontWeight:700},mainV:{flexDirection:"row"}}),L=n(767),U=n(43),F=n(177),V=n(21),H=n(765);function W(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var s=h()(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return m()(this,n)}}var K=new O.a("https://forno.celo.org"),M=Object(T.newKitFromWeb3)(K),J=function(e){u()(n,e);var t=W(n);function n(){var e;o()(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={amount:"",reference:"",company:V.any,address:P.CELO.DESTINATION_ADDRESS,mainPage:!0,spinner:!1},e.handleReference=function(t){e.setState({reference:t})},e.handleAmount=function(t){e.setState({amount:t})},e.transfer=function(){var t,n,a,s,r,o,l,c,i,u,f;return w.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(!e.state.address){m.next=32;break}return console.log("Entering transfer"),t="transfer",n="Honoro",a=P.CELO.DESTINATION_ADDRESS,s=String(1e18*Number(e.state.result.updatedAmount)),m.next=8,w.a.awrap(M.contracts.getStableToken());case 8:return r=m.sent,o=r.transfer(a,s).txo,Object(C.requestTxSig)(M,[{tx:o,to:r.address,from:String(localStorage.getItem("address")),feeCurrency:C.FeeCurrency.cUSD}],{requestId:t,dappName:n,callback:window.location.href}),m.prev=11,m.next=14,w.a.awrap(Object(C.waitForSignedTxs)(t));case 14:c=m.sent,l=c.rawTxs[0],m.next=24;break;case 18:return m.prev=18,m.t0=m.catch(11),console.log(m.t0),F.a.alert("Error",m.t0,[{text:"OK",onPress:function(){return console.log("OK Pressed")}}]),e.setState({status:"transaction signing timed out, try again."}),m.abrupt("return");case 24:return m.next=26,w.a.awrap(M.connection.sendSignedTransaction(l));case 26:return u=m.sent,m.next=29,w.a.awrap(u.waitReceipt());case 29:(f=m.sent).status?(F.a.alert("Success","Transaction completed",[{text:"OK",onPress:function(){return console.log("OK")}}]),i="transfer succeeded with receipt: "+f.transactionHash):(F.a.alert("Error",JSON.stringify(f),[{text:"OK",onPress:function(){return console.log("OK")}}]),console.log(JSON.stringify(f)),i="failed to send transaction"),e.setState({status:i});case 32:case"end":return m.stop()}}),null,null,[[11,18]],Promise)},e}return c()(n,[{key:"save",value:function(){var e=this;this.setState({spinner:!0});var t={company:{amount:this.state.amount,company:this.state.company.value,reference:this.state.reference,source:"honoro",result:V.any}};fetch(P.SERVER.URL+"/transaction/details",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({mainPage:!1,result:t,spinner:!1})})).catch((function(t){console.log(t),e.setState({spinner:!1})}))}},{key:"gotToLogin",value:function(){L.a.pop()}},{key:"render",value:function(){var e=this;return s.a.createElement(j.a,{style:_.container},s.a.createElement(R.a,{visible:this.state.spinner,textContent:"Loading...",textStyle:{color:"#673ab7",fontSize:14}}),s.a.createElement(N.a,{containerStyle:_.card},this.state.mainPage&&s.a.createElement(j.a,null,s.a.createElement(H.a,{items:P.COMPANY_LIST,placeholder:"Select Company",style:_.dropdown,onChangeItem:function(t){return e.setState({company:t})}}),s.a.createElement(U.a,{style:_.input,underlineColorAndroid:"transparent",autoCapitalize:"none",placeholder:"Reference",onChangeText:this.handleReference}),s.a.createElement(U.a,{style:_.input,underlineColorAndroid:"transparent",placeholder:"Amount",autoCapitalize:"none",onChangeText:this.handleAmount}),s.a.createElement(k.a,{style:_.submitButton,onPress:function(){return e.save()}},s.a.createElement(p.a,{style:_.submitButtonText}," Submit "))),!this.state.mainPage&&s.a.createElement(j.a,{style:_.desc},s.a.createElement(p.a,{style:_.pid},"Payment Id: ",this.state.result.invoiceId),s.a.createElement(p.a,{style:_.status},"Pending"),s.a.createElement(p.a,{style:_.title},"Company"),s.a.createElement(p.a,{style:_.value},this.state.company.label),s.a.createElement(p.a,{style:_.title},"Reference"),s.a.createElement(p.a,{style:_.value},this.state.reference),s.a.createElement(p.a,{style:_.title},"Amount in Pesos"),s.a.createElement(p.a,{style:_.value},Number(this.state.amount).toFixed(2)),s.a.createElement(p.a,{style:_.title},"Total in cUSD"),s.a.createElement(p.a,{style:_.value},this.state.result.updatedAmount),s.a.createElement(k.a,{style:_.submitButton,onPress:function(){return e.transfer(e.state.reference,e.state.amount)}},s.a.createElement(p.a,{style:_.submitButtonText}," Confirm Payment "))),s.a.createElement(j.a,{style:_.back},s.a.createElement(k.a,{onPress:this.gotToLogin},s.a.createElement(p.a,{onPress:function(){return e.props.history.push("/")}}," ","Back"," ")))))}}]),n}(s.a.Component),_=g.a.create({container:{paddingTop:23,flex:1,alignItems:"center",justifyContent:"center"},input:{margin:15,height:40,width:200,borderColor:"rgb(223, 223, 223)",borderWidth:1,padding:10},submitButton:{backgroundColor:"#673ab7",padding:10,margin:15,height:40,alignItems:"center",textAlign:"center",borderRadius:5},submitButtonText:{color:"white",fontSize:18,fontWeight:"500"},label:{textAlign:"left",alignItems:"flex-start",justifyContent:"flex-start"},card:{backgroundColor:"#ffffff",width:320,alignItems:"center",borderRadius:3},dropdown:{width:200,marginLeft:15,marginTop:10,marginBottom:10},back:{alignItems:"flex-end"},desc:{paddingTop:10,color:"#1c1b19"},pid:{fontSize:14,fontWeight:"600"},status:{color:"#673ab7",fontStyle:"italic",fontSize:14,marginTop:10},title:{color:"#6f6e6b",fontStyle:"italic",fontSize:12,marginBottom:2,marginTop:10},value:{fontSize:16,fontWeight:"400"},spinnerTextStyle:{color:"#FFF"}}),q=function(){return s.a.createElement(v.a,null,s.a.createElement(S.d,null,s.a.createElement(S.b,{path:"/",exact:!0,component:D}),s.a.createElement(S.b,{path:"/pay",exact:!0,component:J}),s.a.createElement(S.a,{to:"/"})))},G=g.a.create({MainContainer:{flex:1,justifyContent:"center",alignItems:"center",backgroundColor:"#e8ebf4"}});t.a=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(b,null),s.a.createElement(j.a,{style:G.MainContainer},s.a.createElement(q,null)))}},772:function(e,t,n){e.exports=n(1317)},789:function(e,t){},791:function(e,t){},805:function(e,t){},806:function(e,t){},832:function(e,t){},834:function(e,t){},845:function(e,t){},878:function(e,t){},880:function(e,t){},908:function(e,t){},910:function(e,t){},911:function(e,t){},916:function(e,t){},918:function(e,t){},924:function(e,t){},926:function(e,t){},945:function(e,t){},957:function(e,t){},960:function(e,t){}},[[772,1,2]]]);
//# sourceMappingURL=app.73ad0fcd.chunk.js.map